# Development Dockerfile - ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œ
FROM python:3.11-slim

# é–‹ç™ºç”¨ãƒ„ãƒ¼ãƒ«
RUN apt-get update && apt-get install -y \
    git \
    curl \
    inotify-tools \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
COPY <<EOF /usr/local/bin/watch-changes.sh
#!/bin/bash
echo "ðŸ” ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’ç›£è¦–ä¸­..."
inotifywait -mr --format '%w%f %e' -e modify,create,delete,move /app/backend /app/frontend | while read file event; do
    echo "ðŸ“ å¤‰æ›´æ¤œå‡º: \$file (\$event)"
done
EOF

RUN chmod +x /usr/local/bin/watch-changes.sh

CMD ["/usr/local/bin/watch-changes.sh"]